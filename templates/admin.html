{% extends 'base.html' %}
{% block content %}
<section class="admin">
  <h1 class="title">Panneau Admin</h1>

  <div class="admin-grid">
    <div class="card glass">
      <h2>Categories</h2>
      <ul class="list">
        {% for c in categories %}
          <li>{{ c['nom'] }}
            <a class="link danger" href="{{ url_for('supprimer_categorie', cat_id=c['id']) }}">Supprimer</a>
          </li>
        {% else %}
          <li>Aucune categorie</li>
        {% endfor %}
      </ul>
      <form class="form" method="POST" action="{{ url_for('ajouter_categorie') }}">
        <input type="text" name="nom" placeholder="Nouvelle categorie" required>
        <button class="btn" type="submit">Ajouter</button>
      </form>
    </div>

    <div class="card glass">
      <h2>Produits</h2>
      <ul class="list">
        {% for p in produits %}
          <li>{{ p['nom'] }} â€” {{ '{:.2f}'.format(p['prix']) }}
            <a class="link" href="{{ url_for('admin_modifier_produit', prod_id=p['id']) }}">Modifier</a>
            <a class="link danger" href="{{ url_for('admin_supprimer_produit', prod_id=p['id']) }}">Supprimer</a>
          </li>
        {% else %}
          <li>Aucun produit</li>
        {% endfor %}
      </ul>

      <h3>Ajouter un produit</h3>
      <form class="form" method="POST" action="{{ url_for('admin_ajouter_produit') }}" enctype="multipart/form-data">
        <input type="text" name="nom" placeholder="Nom" required>
        <input type="number" step="0.01" name="prix" placeholder="Prix" required>
        <textarea name="description" placeholder="Description"></textarea>
        <label>Image (depuis votre PC) :</label>
        <input type="file" name="image" accept="image/*">
        <label>Categorie :</label>
        <select name="categorie_id">
          {% for c in categories %}
            <option value="{{ c['id'] }}">{{ c['nom'] }}</option>
          {% endfor %}
        </select>
        <button class="btn" type="submit">Ajouter</button>
      </form>
    </div>
  </div>

  <div class="card glass">
    <h2>Rechercher une commande</h2>
    <form class="form" method="POST" action="{{ url_for('rechercher_commande') }}">
      <input type="text" name="code" placeholder="Code commande" required>
      <button class="btn" type="submit">Rechercher</button>
    </form>
  </div>
</section>
{% endblock %}
