{% extends 'base.html' %}
{% block content %}
<section class="admin">
  <h1 class="title">Modifier produit</h1>
  <form class="form glass" method="POST" enctype="multipart/form-data">
    <input type="text" name="nom" value="{{ produit['nom'] }}" required>
    <input type="number" step="0.01" name="prix" value="{{ produit['prix'] }}" required>
    <textarea name="description" placeholder="Description">{{ produit['description'] or '' }}</textarea>

    <label>Image actuelle :</label>
    {% if produit['image'] %}
      <img class="mini" src="{{ url_for('static', filename=produit['image']) }}" alt="{{ produit['nom'] }}">
    {% else %}
      <img class="mini" src="{{ url_for('static', filename='placeholder.svg') }}" alt="{{ produit['nom'] }}">
    {% endif %}
    <input type="hidden" name="image_exist" value="{{ produit['image'] or '' }}">

    <label>Nouvelle image (optionnel) :</label>
    <input type="file" name="image" accept="image/*">

    <label>Categorie :</label>
    <select name="categorie_id">
      {% for c in categories %}
        <option value="{{ c['id'] }}" {% if produit['categorie_id'] == c['id'] %}selected{% endif %}>{{ c['nom'] }}</option>
      {% endfor %}
    </select>

    <button class="btn" type="submit">Enregistrer</button>
  </form>
</section>
{% endblock %}
